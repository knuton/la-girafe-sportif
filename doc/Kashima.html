<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>Kashima</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Kashima</h1>

<div class="code">
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Untyped.html#"><span class="id" type="library">Untyped</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Subst.html#"><span class="id" type="library">Subst</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Beta.html#"><span class="id" type="library">Beta</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Relations.Relation_Operators.html#"><span class="id" type="library">Relation_Operators</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Program.Equality.html#"><span class="id" type="library">Coq.Program.Equality</span></a>.<br/>

<br/>
</div>

<div class="doc">
Reduction Numbering (Definition 2.1) 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;Predicate&nbsp;characterising&nbsp;abstractions.&nbsp;*)</span><br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="abstr"><span class="id" type="inductive">abstr</span></a> : <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> → <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="islam"><span class="id" type="constructor">islam</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t</span>, <a class="idref" href="Kashima.html#abstr"><span class="id" type="inductive">abstr</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Lam"><span class="id" type="constructor">Lam</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a>).<br/>

<br/>
<span class="id" type="keyword">Example</span> <a name="notabstr"><span class="id" type="definition">notabstr</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:'~'_x"><span class="id" type="notation">¬</span></a> <a class="idref" href="Kashima.html#abstr"><span class="id" type="inductive">abstr</span></a> (<a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x").<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#not"><span class="id" type="definition">not</span></a>. <span class="id" type="tactic">intro</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Count&nbsp;the&nbsp;total&nbsp;number&nbsp;of&nbsp;redexes&nbsp;in&nbsp;a&nbsp;term.&nbsp;*)</span><br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="redcount"><span class="id" type="definition">redcount</span></a> (<span class="id" type="var">t</span> : <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> <span class="id" type="var">v</span> ⇒ 0<br/>
&nbsp;&nbsp;| <a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">tinner</span>) <span class="id" type="var">targ</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Kashima.html#redcount"><span class="id" type="definition">redcount</span></a> <span class="id" type="var">tinner</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Kashima.html#redcount"><span class="id" type="definition">redcount</span></a> <span class="id" type="var">targ</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> 1<br/>
&nbsp;&nbsp;| <a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Kashima.html#redcount"><span class="id" type="definition">redcount</span></a> <span class="id" type="var">t1</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Kashima.html#redcount"><span class="id" type="definition">redcount</span></a> <span class="id" type="var">t2</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Untyped.html#DeBruijn.Lam"><span class="id" type="constructor">Lam</span></a> <span class="id" type="var">t</span> ⇒ <a class="idref" href="Kashima.html#redcount"><span class="id" type="definition">redcount</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <a name="countright"><span class="id" type="definition">countright</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#redcount"><span class="id" type="definition">redcount</span></a> (<a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x") <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="Kashima.html#redcount"><span class="id" type="definition">redcount</span></a> (<a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x" <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z") <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="Kashima.html#redcount"><span class="id" type="definition">redcount</span></a> (<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"x" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"y" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"y" <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"y"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z") <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 2.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">compute</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">split</span>; <span class="id" type="tactic">compute</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;This&nbsp;is&nbsp;the&nbsp;predicate&nbsp;defined&nbsp;in&nbsp;2.1.<br/>
&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" type="var">nthred</span></span> <span class="inlinecode"><span class="id" type="var">n</span></span> <span class="inlinecode"><span class="id" type="var">t</span></span> <span class="inlinecode"><span class="id" type="var">t'</span></span>&nbsp;states&nbsp;that&nbsp;<span class="inlinecode"><span class="id" type="var">t'</span></span>&nbsp;is&nbsp;the&nbsp;result&nbsp;of&nbsp;reducing&nbsp;the&nbsp;<span class="inlinecode"><span class="id" type="var">n</span></span>-th&nbsp;redex&nbsp;in&nbsp;<span class="inlinecode"><span class="id" type="var">t</span></span>.<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="nthred"><span class="id" type="inductive">nthred</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a> → <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> → <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> → <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="nthred_prim"><span class="id" type="constructor">nthred_prim</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> 1 (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Lam"><span class="id" type="constructor">Lam</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a>) <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a>) (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> 0 <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a>)<br/>
&nbsp;&nbsp;| <a name="nthred_concr"><span class="id" type="constructor">nthred_concr</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">n</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:'~'_x"><span class="id" type="notation">¬</span></a> <a class="idref" href="Kashima.html#abstr"><span class="id" type="inductive">abstr</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> → <a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a>) (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a>)<br/>
&nbsp;&nbsp;| <a name="nthred_concrplus"><span class="id" type="constructor">nthred_concrplus</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">n</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Kashima.html#abstr"><span class="id" type="inductive">abstr</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> → <a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> (<a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1) (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a>) (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a>)<br/>
&nbsp;&nbsp;| <a name="nthred_concl"><span class="id" type="constructor">nthred_concl</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">n</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:'~'_x"><span class="id" type="notation">¬</span></a> <a class="idref" href="Kashima.html#abstr"><span class="id" type="inductive">abstr</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> → <a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> (<a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="Kashima.html#redcount"><span class="id" type="definition">redcount</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a>) (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a>) (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a>)<br/>
&nbsp;&nbsp;| <a name="nthred_conclplus"><span class="id" type="constructor">nthred_conclplus</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">n</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Kashima.html#abstr"><span class="id" type="inductive">abstr</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> → <a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> (<a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Kashima.html#redcount"><span class="id" type="definition">redcount</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> 1) (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a>) (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a>)<br/>
&nbsp;&nbsp;| <a name="nthred_abst"><span class="id" type="constructor">nthred_abst</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">n</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> → <a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Lam"><span class="id" type="constructor">Lam</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a>) (<a class="idref" href="Untyped.html#DeBruijn.Lam"><span class="id" type="constructor">Lam</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a>).<br/>

<br/>
<span class="id" type="keyword">Example</span> <a name="prim"><span class="id" type="definition">prim</span></a> : <a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> 1 (<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"x" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"y") (<a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"y").<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#nthred_prim"><span class="id" type="constructor">nthred_prim</span></a>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <a name="concr"><span class="id" type="definition">concr</span></a> : <a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> 1 (<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"x" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"y" <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z") (<a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"y" <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z").<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#nthred_concr"><span class="id" type="constructor">nthred_concr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#not"><span class="id" type="definition">not</span></a>. <span class="id" type="tactic">intro</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#nthred_prim"><span class="id" type="constructor">nthred_prim</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <a name="concrplus"><span class="id" type="definition">concrplus</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> 2 (<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"y" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"x" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"y"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z") (<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"y" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"y"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z").<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">M</span>: 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> 1). <span class="id" type="tactic">reflexivity</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">M</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#nthred_concrplus"><span class="id" type="constructor">nthred_concrplus</span></a>. <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#islam"><span class="id" type="constructor">islam</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#nthred_abst"><span class="id" type="constructor">nthred_abst</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#nthred_prim"><span class="id" type="constructor">nthred_prim</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <a name="concl"><span class="id" type="definition">concl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> 2 (<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">((</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"x" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">((</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"x" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">((</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"x" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z").<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">M</span>: 2 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="Kashima.html#redcount"><span class="id" type="definition">redcount</span></a> (<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"x" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z")). <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">M</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#nthred_concl"><span class="id" type="constructor">nthred_concl</span></a>. <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#not"><span class="id" type="definition">not</span></a>. <span class="id" type="tactic">intro</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#nthred_prim"><span class="id" type="constructor">nthred_prim</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <a name="conclplus"><span class="id" type="definition">conclplus</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> 3 (<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"y" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"x" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z"<a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">)</span></a><a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">((</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"x" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"y" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"x" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z"<a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">)</span></a><a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z").<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">M</span>: 3 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> 1 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <a class="idref" href="Kashima.html#redcount"><span class="id" type="definition">redcount</span></a> (<a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"y" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">(</span></a><a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">\</span></a>"x" <a class="idref" href="Untyped.html#::'\'_x_'~>'_x"><span class="id" type="notation">~&gt;</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"x"<a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Untyped.html#::x_'$'_x"><span class="id" type="notation">$</span></a> <a class="idref" href="Untyped.html#::'`'_x"><span class="id" type="notation">`</span></a>"z") <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> 1). <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">reflexivity</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">M</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#nthred_conclplus"><span class="id" type="constructor">nthred_conclplus</span></a>. <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#islam"><span class="id" type="constructor">islam</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#nthred_prim"><span class="id" type="constructor">nthred_prim</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Beta-reduction and left-most reduction (Definition 2.2) 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;The&nbsp;paper&nbsp;defines&nbsp;beta-reduction&nbsp;in&nbsp;terms&nbsp;of&nbsp;the&nbsp;<span class="inlinecode"><span class="id" type="var">nthred</span></span>&nbsp;relation.<br/>
&nbsp;&nbsp;&nbsp;Equivalence&nbsp;with&nbsp;the&nbsp;definition&nbsp;found&nbsp;in&nbsp;<span class="inlinecode"><span class="id" type="var">Beta</span></span>&nbsp;has&nbsp;yet&nbsp;to&nbsp;be&nbsp;proven&nbsp;(if&nbsp;necessary).<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="bet"><span class="id" type="definition">bet</span></a> (<span class="id" type="var">t1</span> <span class="id" type="var">t2</span> : <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a>) : <span class="id" type="keyword">Prop</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">∃</span></a> <span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:'exists'_x_'..'_x_','_x"><span class="id" type="notation">,</span></a> <a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="betstar"><span class="id" type="definition">betstar</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Relations.Relation_Operators.html#clos_refl_trans"><span class="id" type="inductive">clos_refl_trans</span></a> <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> <a class="idref" href="Kashima.html#bet"><span class="id" type="definition">bet</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="betstar_step"><span class="id" type="definition">betstar_step</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Relations.Relation_Operators.html#rt_step"><span class="id" type="constructor">rt_step</span></a> <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> <a class="idref" href="Kashima.html#bet"><span class="id" type="definition">bet</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="betstar_refl"><span class="id" type="definition">betstar_refl</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Relations.Relation_Operators.html#rt_refl"><span class="id" type="constructor">rt_refl</span></a> <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> <a class="idref" href="Kashima.html#bet"><span class="id" type="definition">bet</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="betstar_trans"><span class="id" type="definition">betstar_trans</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Relations.Relation_Operators.html#rt_trans"><span class="id" type="constructor">rt_trans</span></a> <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> <a class="idref" href="Kashima.html#bet"><span class="id" type="definition">bet</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Left-most&nbsp;reduction&nbsp;is&nbsp;simply&nbsp;reduction&nbsp;of&nbsp;the&nbsp;first&nbsp;redex.&nbsp;*)</span><br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="lmost"><span class="id" type="definition">lmost</span></a> (<span class="id" type="var">t1</span> <span class="id" type="var">t2</span> : <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a>) : <span class="id" type="keyword">Prop</span> := <a class="idref" href="Kashima.html#nthred"><span class="id" type="inductive">nthred</span></a> 1 <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="lstar"><span class="id" type="definition">lstar</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Relations.Relation_Operators.html#clos_refl_trans"><span class="id" type="inductive">clos_refl_trans</span></a> <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> <a class="idref" href="Kashima.html#lmost"><span class="id" type="definition">lmost</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="lstar_step"><span class="id" type="definition">lstar_step</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Relations.Relation_Operators.html#rt_step"><span class="id" type="constructor">rt_step</span></a> <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> <a class="idref" href="Kashima.html#lmost"><span class="id" type="definition">lmost</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="lstar_refl"><span class="id" type="definition">lstar_refl</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Relations.Relation_Operators.html#rt_refl"><span class="id" type="constructor">rt_refl</span></a> <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> <a class="idref" href="Kashima.html#lmost"><span class="id" type="definition">lmost</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="lstar_trans"><span class="id" type="definition">lstar_trans</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Relations.Relation_Operators.html#rt_trans"><span class="id" type="constructor">rt_trans</span></a> <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> <a class="idref" href="Kashima.html#lmost"><span class="id" type="definition">lmost</span></a>.<br/>

<br/>
</div>

<div class="doc">
Head-reduction in application (Definition 3.1) 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="hap'"><span class="id" type="inductive">hap'</span></a> : <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> → <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> → <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="hap'_hred"><span class="id" type="constructor">hap'_hred</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t0</span> <span class="id" type="var">t1</span>, <a class="idref" href="Kashima.html#hap'"><span class="id" type="inductive">hap'</span></a> (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Lam"><span class="id" type="constructor">Lam</span></a> <a class="idref" href="Kashima.html#t0"><span class="id" type="variable">t0</span></a>) <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a>) (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> 0 <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t0"><span class="id" type="variable">t0</span></a>)<br/>
&nbsp;&nbsp;| <a name="hap'_hreds"><span class="id" type="constructor">hap'_hreds</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t0</span> <span class="id" type="var">t1</span> <span class="id" type="var">ta</span>, <a class="idref" href="Kashima.html#hap'"><span class="id" type="inductive">hap'</span></a> <a class="idref" href="Kashima.html#t0"><span class="id" type="variable">t0</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> → <a class="idref" href="Kashima.html#hap'"><span class="id" type="inductive">hap'</span></a> (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t0"><span class="id" type="variable">t0</span></a> <a class="idref" href="Kashima.html#ta"><span class="id" type="variable">ta</span></a>) (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#ta"><span class="id" type="variable">ta</span></a>).<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="hap"><span class="id" type="inductive">hap</span></a> : <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> → <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> → <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="hap_refl"><span class="id" type="constructor">hap_refl</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t</span>, <a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a><br/>
&nbsp;&nbsp;| <a name="hap_hred"><span class="id" type="constructor">hap_hred</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t0</span> <span class="id" type="var">t1</span>, <a class="idref" href="Kashima.html#hap'"><span class="id" type="inductive">hap'</span></a> <a class="idref" href="Kashima.html#t0"><span class="id" type="variable">t0</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> → <a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t0"><span class="id" type="variable">t0</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a><br/>
&nbsp;&nbsp;| <a name="hap_trans"><span class="id" type="constructor">hap_trans</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span>, <a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> → <a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> → <a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a>.<br/>

<br/>
</div>

<div class="doc">
Standard reduction (Definition 3.2) 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="st"><span class="id" type="inductive">st</span></a> : <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> → <a class="idref" href="Untyped.html#DeBruijn.lterm"><span class="id" type="inductive">lterm</span></a> → <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="st_hap"><span class="id" type="constructor">st_hap</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t</span> <span class="id" type="var">i</span>, <a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a>) → <a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a>)<br/>
&nbsp;&nbsp;| <a name="st_hap_st_st"><span class="id" type="constructor">st_hap_st_st</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t1'</span> <span class="id" type="var">t2'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a>) → <a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t1'"><span class="id" type="variable">t1'</span></a> → <a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> <a class="idref" href="Kashima.html#t2'"><span class="id" type="variable">t2'</span></a> → <a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t1'"><span class="id" type="variable">t1'</span></a> <a class="idref" href="Kashima.html#t2'"><span class="id" type="variable">t2'</span></a>)<br/>
&nbsp;&nbsp;| <a name="st_haplam_st"><span class="id" type="constructor">st_haplam_st</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t</span> <span class="id" type="var">t1</span> <span class="id" type="var">t1'</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Lam"><span class="id" type="constructor">Lam</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a>) → <a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t1'"><span class="id" type="variable">t1'</span></a> → <a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Lam"><span class="id" type="constructor">Lam</span></a> <a class="idref" href="Kashima.html#t1'"><span class="id" type="variable">t1'</span></a>).<br/>

<br/>
</div>

<div class="doc">
Lemma 3.3 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;(1)&nbsp;*)</span><br/>
<span class="id" type="keyword">Lemma</span> <a name="hap_lstar"><span class="id" type="lemma">hap_lstar</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span>, <a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> → <a class="idref" href="Kashima.html#lstar"><span class="id" type="definition">lstar</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [ <span class="id" type="var">t</span> | <span class="id" type="var">t0</span> <span class="id" type="var">t1</span> | <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span>]. <span class="comment">(*case&nbsp;H.*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;hap_refl&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#lstar_refl"><span class="id" type="definition">lstar_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;hap_hred&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#lstar_step"><span class="id" type="definition">lstar_step</span></a>. <span class="id" type="tactic">unfold</span> <a class="idref" href="Kashima.html#lmost"><span class="id" type="definition">lmost</span></a>. <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#nthred_prim"><span class="id" type="constructor">nthred_prim</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#nthred_concr"><span class="id" type="constructor">nthred_concr</span></a>. <span class="id" type="tactic">split</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#not"><span class="id" type="definition">not</span></a>. <span class="id" type="tactic">intro</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;hap_trans&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#lstar_trans"><span class="id" type="definition">lstar_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">y</span> := <span class="id" type="var">t2</span>). <span class="id" type="tactic">apply</span> <span class="id" type="var">IHhap1</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">IHhap2</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;(2)&nbsp;needs&nbsp;definition&nbsp;not&nbsp;yet&nbsp;introduced&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
Lemma 3.4 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;(1)&nbsp;*)</span><br/>
<span class="id" type="keyword">Lemma</span> <a name="st_refl"><span class="id" type="lemma">st_refl</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t</span>, <a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">induction</span> <span class="id" type="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_hap"><span class="id" type="constructor">st_hap</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_refl"><span class="id" type="constructor">hap_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_haplam_st"><span class="id" type="constructor">st_haplam_st</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t1</span> := <span class="id" type="var">t</span>). <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_refl"><span class="id" type="constructor">hap_refl</span></a>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_hap_st_st"><span class="id" type="constructor">st_hap_st_st</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t1</span> := <span class="id" type="var">t1</span>) (<span class="id" type="var">t2</span> := <span class="id" type="var">t2</span>). <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_refl"><span class="id" type="constructor">hap_refl</span></a>. <span class="id" type="tactic">assumption</span>. <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;(2)&nbsp;*)</span><br/>
<span class="id" type="keyword">Lemma</span> <a name="hap__app_hap"><span class="id" type="lemma">hap__app_hap</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> → <a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a>) (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_refl"><span class="id" type="constructor">hap_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_hred"><span class="id" type="constructor">hap_hred</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap'_hreds"><span class="id" type="constructor">hap'_hreds</span></a>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_trans"><span class="id" type="constructor">hap_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t2</span> := <a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span>); <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;(3)&nbsp;*)</span><br/>
<span class="id" type="keyword">Lemma</span> <a name="hap_st__st"><span class="id" type="lemma">hap_st__st</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> → <a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> → <a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_hap"><span class="id" type="constructor">st_hap</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_trans"><span class="id" type="constructor">hap_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t2</span> := <span class="id" type="var">t</span>). <span class="id" type="tactic">assumption</span>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_hap_st_st"><span class="id" type="constructor">st_hap_st_st</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t1</span> := <span class="id" type="var">t0</span>) (<span class="id" type="var">t2</span> := <span class="id" type="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_trans"><span class="id" type="constructor">hap_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t2</span> := <span class="id" type="var">t</span>); <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_haplam_st"><span class="id" type="constructor">st_haplam_st</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t1</span> := <span class="id" type="var">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_trans"><span class="id" type="constructor">hap_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t2</span> := <span class="id" type="var">t</span>); <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;(4)&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;first&nbsp;prove&nbsp;<span class="inlinecode"><span class="id" type="var">subst_hap'</span></span>,&nbsp;after&nbsp;which&nbsp;the&nbsp;actual&nbsp;lemma&nbsp;is&nbsp;easy&nbsp;to&nbsp;show.&nbsp;*)</span><br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="subst_hap'"><span class="id" type="lemma">subst_hap'</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span>, <span class="id" type="keyword">∀</span> <span class="id" type="var">n</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#hap'"><span class="id" type="inductive">hap'</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> → <a class="idref" href="Kashima.html#hap'"><span class="id" type="inductive">hap'</span></a> (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a>) (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;hap'_hred&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">EXP</span>: <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t3</span> (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> 0 <span class="id" type="var">t1</span> <span class="id" type="var">t0</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> 0 (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t3</span> <span class="id" type="var">t1</span>) (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1) <span class="id" type="var">t3</span> <span class="id" type="var">t0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">assert</span> (<span class="id" type="var">T1</span>: <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t3</span> <span class="id" type="var">t1</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 0) <span class="id" type="var">t3</span> <span class="id" type="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">T2</span>: <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 0). <span class="id" type="tactic">omega</span>. <span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">T2</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">T1</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Subst.html#subst_lemma"><span class="id" type="lemma">subst_lemma</span></a>. <span class="id" type="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">EXP</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap'_hred"><span class="id" type="constructor">hap'_hred</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;hap'_hreds&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap'_hreds"><span class="id" type="constructor">hap'_hreds</span></a>. <span class="id" type="tactic">apply</span> <span class="id" type="var">IHhap'</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="hap__hap_subst"><span class="id" type="lemma">hap__hap_subst</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> → <span class="id" type="keyword">∀</span> <span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>, <a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a>) (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span> <span class="id" type="var">H</span> <span class="id" type="var">n</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_refl"><span class="id" type="constructor">hap_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_hred"><span class="id" type="constructor">hap_hred</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#subst_hap'"><span class="id" type="lemma">subst_hap'</span></a>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_trans"><span class="id" type="constructor">hap_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t2</span> := <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t3</span> <span class="id" type="var">t2</span>); <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;We&nbsp;need&nbsp;to&nbsp;do&nbsp;quite&nbsp;a&nbsp;bit&nbsp;of&nbsp;busywork&nbsp;for&nbsp;(5).&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;First,&nbsp;lift-independence&nbsp;of&nbsp;<span class="inlinecode"><span class="id" type="var">hap</span></span>,&nbsp;which&nbsp;is&nbsp;easy.&nbsp;*)</span><br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="lift_hap'"><span class="id" type="lemma">lift_hap'</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t</span> <span class="id" type="var">t'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#hap'"><span class="id" type="inductive">hap'</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Kashima.html#t'"><span class="id" type="variable">t'</span></a> → <span class="id" type="keyword">∀</span> <span class="id" type="var">n</span> <span class="id" type="var">k</span>, <a class="idref" href="Kashima.html#hap'"><span class="id" type="inductive">hap'</span></a> (<a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a>) (<a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="Kashima.html#t'"><span class="id" type="variable">t'</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">t</span> <span class="id" type="var">t'</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;hap'_hred&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">k</span>. <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <a class="idref" href="Subst.html#lift_distr_subst"><span class="id" type="lemma">lift_distr_subst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">replace</span> (<span class="id" type="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'-'_x"><span class="id" type="notation">-</span></a> 0) <span class="id" type="keyword">with</span> <span class="id" type="var">k</span> <span class="id" type="tactic">by</span> <span class="id" type="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap'_hred"><span class="id" type="constructor">hap'_hred</span></a>. <span class="id" type="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;hap'_hreds&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">k</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="Subst.html#lift_app"><span class="id" type="lemma">lift_app</span></a>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="Subst.html#lift_app"><span class="id" type="lemma">lift_app</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap'_hreds"><span class="id" type="constructor">hap'_hreds</span></a>. <span class="id" type="tactic">apply</span> (<span class="id" type="var">IHhap'</span> <span class="id" type="var">n</span>).<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="lift_hap"><span class="id" type="lemma">lift_hap</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t</span> <span class="id" type="var">t'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Kashima.html#t'"><span class="id" type="variable">t'</span></a> → <span class="id" type="keyword">∀</span> <span class="id" type="var">n</span> <span class="id" type="var">k</span>, <a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> (<a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a>) (<a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="Kashima.html#t'"><span class="id" type="variable">t'</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;hap_refl&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_refl"><span class="id" type="constructor">hap_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;hap_hreds&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_hred"><span class="id" type="constructor">hap_hred</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#lift_hap'"><span class="id" type="lemma">lift_hap'</span></a>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;hap_trans&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_trans"><span class="id" type="constructor">hap_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t2</span> := <a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <span class="id" type="var">n</span> <span class="id" type="var">k</span> <span class="id" type="var">t2</span>); <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Second,&nbsp;lift-independence&nbsp;for&nbsp;<span class="inlinecode"><span class="id" type="var">st</span></span>,&nbsp;which&nbsp;is&nbsp;more&nbsp;intricate.&nbsp;*)</span><br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="hap'_no_lhs_var"><span class="id" type="lemma">hap'_no_lhs_var</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">i</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:'~'_x"><span class="id" type="notation">¬</span></a> <a class="idref" href="Kashima.html#hap'"><span class="id" type="inductive">hap'</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a>) <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a>.<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">intros</span>. <span class="id" type="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#not"><span class="id" type="definition">not</span></a>. <span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="hap_lefthandside_var"><span class="id" type="lemma">hap_lefthandside_var</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">i</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a>) <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> → <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">dependent</span> <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">contradict</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap'_no_lhs_var"><span class="id" type="lemma">hap'_no_lhs_var</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHhap2</span>. <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <a name="lift_first_hap_ex1"><span class="id" type="definition">lift_first_hap_ex1</span></a> : <a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> (<a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> 4 6 (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Lam"><span class="id" type="constructor">Lam</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> 0)) (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> 3))) (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> 3).<br/>
<span class="id" type="keyword">Proof</span>. <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_hred"><span class="id" type="constructor">hap_hred</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap'_hred"><span class="id" type="constructor">hap'_hred</span></a>. <span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Example</span> <a name="lift_first_hap_ex2"><span class="id" type="definition">lift_first_hap_ex2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> 4 4 ((<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> (<a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Lam"><span class="id" type="constructor">Lam</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> 0)) (<a class="idref" href="Untyped.html#DeBruijn.Lam"><span class="id" type="constructor">Lam</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> 4))) (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> 7))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> 3).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_trans"><span class="id" type="constructor">hap_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t2</span> := <a class="idref" href="Untyped.html#DeBruijn.App"><span class="id" type="constructor">App</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Lam"><span class="id" type="constructor">Lam</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> 4)) (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> 11)).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_hred"><span class="id" type="constructor">hap_hred</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap'_hreds"><span class="id" type="constructor">hap'_hreds</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap'_hred"><span class="id" type="constructor">hap'_hred</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> 3 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> 0 (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> 11) (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> 4)). <span class="id" type="tactic">reflexivity</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_hred"><span class="id" type="constructor">hap_hred</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap'_hred"><span class="id" type="constructor">hap'_hred</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="subst_to_var"><span class="id" type="lemma">subst_to_var</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t</span> <span class="id" type="var">t'</span> <span class="id" type="var">i</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> 0 <a class="idref" href="Kashima.html#t'"><span class="id" type="variable">t'</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a> → <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'/\'_x"><span class="id" type="notation">∧</span></a> <a class="idref" href="Kashima.html#t'"><span class="id" type="variable">t'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'\/'_x"><span class="id" type="notation">∨</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> (<a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> 1).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Var&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>. <span class="id" type="var">case_eq</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Compare_dec.html#nat_compare"><span class="id" type="definition">Compare_dec.nat_compare</span></a> <span class="id" type="var">n</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Eq&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">nEQ0</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">nEQ0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Compare_dec.html#nat_compare_eq_iff"><span class="id" type="lemma">Compare_dec.nat_compare_eq_iff</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">nEQ0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">left</span>. <span class="id" type="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">f_equal</span>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Subst.html#lift_0_ident"><span class="id" type="lemma">lift_0_ident</span></a> <span class="id" type="var">t'</span> 0). <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Lt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">nLT0</span>. <span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Compare_dec.html#nat_compare_lt"><span class="id" type="lemma">Compare_dec.nat_compare_lt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">nLT0</span>. <span class="id" type="var">contradict</span> <span class="id" type="var">nLT0</span>. <span class="id" type="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Gt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">nGT0</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">nGT0</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H1</span>. <span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Compare_dec.html#nat_compare_gt"><span class="id" type="lemma">Compare_dec.nat_compare_gt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">nGT0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">right</span>. <span class="id" type="tactic">f_equal</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Plus.html#plus_comm"><span class="id" type="lemma">Plus.plus_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H1</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Minus.html#le_plus_minus"><span class="id" type="lemma">Minus.le_plus_minus</span></a>. <span class="id" type="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Lam&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;App&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="subst_indist"><span class="id" type="lemma">subst_indist</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">i</span> <span class="id" type="var">r</span> <span class="id" type="var">r'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'>'_x"><span class="id" type="notation">&gt;</span></a> 0 → <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> 0 <a class="idref" href="Kashima.html#r"><span class="id" type="variable">r</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> 0 <a class="idref" href="Kashima.html#r'"><span class="id" type="variable">r'</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Compare_dec.html#nat_compare_gt"><span class="id" type="lemma">Compare_dec.nat_compare_gt</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;This&nbsp;lemma&nbsp;is&nbsp;not&nbsp;yet&nbsp;fully&nbsp;established,&nbsp;there&nbsp;are&nbsp;two&nbsp;<span class="inlinecode"><span class="id" type="var">admit</span></span>s.<br/>
&nbsp;&nbsp;&nbsp;The&nbsp;first&nbsp;<span class="inlinecode"><span class="id" type="var">admit</span></span>&nbsp;should&nbsp;be&nbsp;straightforward&nbsp;to&nbsp;eliminate&nbsp;(intuitively).<br/>
&nbsp;&nbsp;&nbsp;Somehow&nbsp;the&nbsp;transitive&nbsp;evidence&nbsp;rule&nbsp;for&nbsp;<span class="inlinecode"><span class="id" type="var">hap</span></span>&nbsp;makes&nbsp;it&nbsp;hard&nbsp;to&nbsp;show<br/>
&nbsp;&nbsp;&nbsp;that&nbsp;<span class="inlinecode"><span class="id" type="var">hap</span></span>&nbsp;does&nbsp;not&nbsp;hold&nbsp;between&nbsp;any&nbsp;two&nbsp;terms&nbsp;if&nbsp;the&nbsp;first&nbsp;is&nbsp;an<br/>
&nbsp;&nbsp;&nbsp;abstraction,&nbsp;however.<br/>
*)</span><br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="lift_first_hap"><span class="id" type="lemma">lift_first_hap</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t</span> <span class="id" type="var">n</span> <span class="id" type="var">i</span> <span class="id" type="var">k</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a>) → <a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'<'_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="Kashima.html#k"><span class="id" type="variable">k</span></a> → <a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> (<a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a>) (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <a class="idref" href="Kashima.html#i"><span class="id" type="variable">i</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">t</span> <span class="id" type="var">n</span> <span class="id" type="var">i</span> <span class="id" type="var">k</span> <span class="id" type="var">H</span> <span class="id" type="var">iLTk</span>. <span class="id" type="tactic">dependent</span> <span class="id" type="tactic">induction</span> <span class="id" type="var">t</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Var&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_lefthandside_var"><span class="id" type="lemma">hap_lefthandside_var</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H</span>. <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" type="var">case_eq</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Compare_dec.html#lt_dec"><span class="id" type="lemma">Compare_dec.lt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_refl"><span class="id" type="constructor">hap_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="var">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Lam&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">H0</span>. <span class="comment">(*&nbsp;TODO&nbsp;how&nbsp;to&nbsp;handle&nbsp;these&nbsp;transitive&nbsp;cases?&nbsp;*)</span> <span class="id" type="var">admit</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;App&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">dependent</span> <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_hred"><span class="id" type="constructor">hap_hred</span></a>. <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">case</span> (<a class="idref" href="Kashima.html#subst_to_var"><span class="id" type="lemma">subst_to_var</span></a> <span class="id" type="var">t0</span> <span class="id" type="var">t2</span> <span class="id" type="var">i</span>). <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;t2&nbsp;=&nbsp;Var&nbsp;i&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">HC</span>. <span class="id" type="tactic">inversion</span> <span class="id" type="var">HC</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">Ht0</span> <span class="id" type="var">Ht2</span>]. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Ht2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">LFT</span>: <a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <span class="id" type="var">n</span> <span class="id" type="var">k</span> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">i</span>)). <span class="id" type="tactic">simpl</span>. <span class="id" type="var">case_eq</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Compare_dec.html#lt_dec"><span class="id" type="lemma">Compare_dec.lt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;i&nbsp;&lt;&nbsp;k&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;~&nbsp;i&nbsp;&lt;&nbsp;k&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">LFT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">IGN</span>: <span class="id" type="var">t0</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <span class="id" type="var">n</span> (<span class="id" type="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> 1) <span class="id" type="var">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">Ht0</span>. <span class="id" type="tactic">simpl</span>. <span class="id" type="var">case_eq</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Compare_dec.html#lt_dec"><span class="id" type="lemma">Compare_dec.lt_dec</span></a> 0 (<span class="id" type="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> 1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;0&nbsp;&lt;&nbsp;k&nbsp;+&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;~&nbsp;0&nbsp;&lt;&nbsp;k&nbsp;+&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="var">contradict</span> <span class="id" type="var">iLTk</span>. <span class="id" type="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">IGN</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap'_hred"><span class="id" type="constructor">hap'_hred</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;t0&nbsp;=&nbsp;Var&nbsp;(i&nbsp;+&nbsp;1)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">Hti1</span>. <span class="id" type="tactic">rewrite</span> <span class="id" type="var">Hti1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">INDIST</span>: <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> 0 <span class="id" type="var">t2</span> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> 0 (<a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <span class="id" type="var">n</span> <span class="id" type="var">k</span> <span class="id" type="var">t2</span>) (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#subst_indist"><span class="id" type="lemma">subst_indist</span></a>. <span class="id" type="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">INDIST</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">IGN</span>: <a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <span class="id" type="var">n</span> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1) (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1)) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> (<span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="var">case_eq</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Compare_dec.html#lt_dec"><span class="id" type="lemma">Compare_dec.lt_dec</span></a> (<span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> 1) (<span class="id" type="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> 1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;i&nbsp;+&nbsp;1&nbsp;&lt;&nbsp;k&nbsp;+&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;~&nbsp;i&nbsp;+&nbsp;1&nbsp;&lt;&nbsp;k&nbsp;+&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">FLS</span>. <span class="id" type="var">contradict</span> <span class="id" type="var">FLS</span>. <span class="id" type="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IGN</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap'_hred"><span class="id" type="constructor">hap'_hred</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="Subst.html#lift_app"><span class="id" type="lemma">lift_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHhap1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHt2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <span class="id" type="var">IHt1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">admit</span>. <span class="comment">(*&nbsp;TODO&nbsp;this&nbsp;one&nbsp;is&nbsp;weird&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="lift_st"><span class="id" type="lemma">lift_st</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t</span> <span class="id" type="var">t'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a> <a class="idref" href="Kashima.html#t'"><span class="id" type="variable">t'</span></a> → <span class="id" type="keyword">∀</span> <span class="id" type="var">n</span> <span class="id" type="var">k</span>, <a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> (<a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="Kashima.html#t"><span class="id" type="variable">t</span></a>) (<a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#k"><span class="id" type="variable">k</span></a> <a class="idref" href="Kashima.html#t'"><span class="id" type="variable">t'</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">t</span> <span class="id" type="var">t'</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">dependent</span> <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;st_hap&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">k</span>. <span class="id" type="tactic">simpl</span>. <span class="id" type="var">case_eq</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Compare_dec.html#lt_dec"><span class="id" type="lemma">Compare_dec.lt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;i&nbsp;&lt;&nbsp;k&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_hap"><span class="id" type="constructor">st_hap</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#lift_first_hap"><span class="id" type="lemma">lift_first_hap</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;~&nbsp;i&nbsp;&lt;&nbsp;k&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_hap"><span class="id" type="constructor">st_hap</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<span class="id" type="var">FLD</span>: <a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> (<span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Logic.html#:type_scope:x_'='_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <span class="id" type="var">n</span> <span class="id" type="var">k</span> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">i</span>)). <span class="id" type="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">case_eq</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Compare_dec.html#lt_dec"><span class="id" type="lemma">Compare_dec.lt_dec</span></a> <span class="id" type="var">i</span> <span class="id" type="var">k</span>). <span class="id" type="tactic">intros</span>. <span class="id" type="var">contradiction</span>. <span class="id" type="tactic">intros</span>. <span class="id" type="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> <span class="id" type="var">FLD</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#lift_hap"><span class="id" type="lemma">lift_hap</span></a>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;st_hap_st_st&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">k</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_hap_st_st"><span class="id" type="constructor">st_hap_st_st</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t1</span> := <a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <span class="id" type="var">n</span> <span class="id" type="var">k</span> <span class="id" type="var">t1</span>) (<span class="id" type="var">t2</span> := <a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <span class="id" type="var">n</span> <span class="id" type="var">k</span> <span class="id" type="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="Subst.html#lift_app"><span class="id" type="lemma">lift_app</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#lift_hap"><span class="id" type="lemma">lift_hap</span></a>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">fold</span> <a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a>. <span class="id" type="tactic">apply</span> <span class="id" type="var">IHst1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">fold</span> <a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a>. <span class="id" type="tactic">apply</span> <span class="id" type="var">IHst2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;st_haplam_st&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">k</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_haplam_st"><span class="id" type="constructor">st_haplam_st</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t1</span> := <a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a> <span class="id" type="var">n</span> (<span class="id" type="var">k</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1) <span class="id" type="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="Subst.html#lift_lam"><span class="id" type="lemma">lift_lam</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#lift_hap"><span class="id" type="lemma">lift_hap</span></a>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">fold</span> <a class="idref" href="Subst.html#lift"><span class="id" type="definition">lift</span></a>. <span class="id" type="tactic">apply</span> <span class="id" type="var">IHst</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;(5)&nbsp;*)</span><br/>
<span class="id" type="keyword">Lemma</span> <a name="st_st__st_subst"><span class="id" type="lemma">st_st__st_subst</span></a> : <span class="id" type="keyword">∀</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span> <span class="id" type="var">t4</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a> → <a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> <a class="idref" href="Kashima.html#t4"><span class="id" type="variable">t4</span></a> → <span class="id" type="keyword">∀</span> <span class="id" type="var">n</span>, <a class="idref" href="Kashima.html#st"><span class="id" type="inductive">st</span></a> (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#t3"><span class="id" type="variable">t3</span></a> <a class="idref" href="Kashima.html#t1"><span class="id" type="variable">t1</span></a>) (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <a class="idref" href="Kashima.html#n"><span class="id" type="variable">n</span></a> <a class="idref" href="Kashima.html#t4"><span class="id" type="variable">t4</span></a> <a class="idref" href="Kashima.html#t2"><span class="id" type="variable">t2</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">intros</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">t3</span> <span class="id" type="var">t4</span> <span class="id" type="var">HMN</span> <span class="id" type="var">HPQ</span>. <span class="id" type="tactic">induction</span> <span class="id" type="var">HMN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;hap&nbsp;with&nbsp;Var&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t3</span> <span class="id" type="var">t</span>) (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t3</span> <span class="id" type="var">t</span>)). <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_refl"><span class="id" type="constructor">hap_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assert</span> (<a class="idref" href="Kashima.html#hap"><span class="id" type="inductive">hap</span></a> (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t3</span> <span class="id" type="var">t</span>) (<a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t3</span> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">i</span>))). <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap__hap_subst"><span class="id" type="lemma">hap__hap_subst</span></a>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_st__st"><span class="id" type="lemma">hap_st__st</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t2</span> := <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t3</span> (<a class="idref" href="Untyped.html#DeBruijn.Var"><span class="id" type="constructor">Var</span></a> <span class="id" type="var">i</span>)). <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">simpl</span>. <span class="id" type="var">case_eq</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Arith.Compare_dec.html#nat_compare"><span class="id" type="definition">Compare_dec.nat_compare</span></a> <span class="id" type="var">i</span> <span class="id" type="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Eq&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#lift_st"><span class="id" type="lemma">lift_st</span></a>. <span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Lt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_hap"><span class="id" type="constructor">st_hap</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_refl"><span class="id" type="constructor">hap_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Gt&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_hap"><span class="id" type="constructor">st_hap</span></a>. <span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap_refl"><span class="id" type="constructor">hap_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;hap&nbsp;with&nbsp;App&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>. <span class="id" type="tactic">rewrite</span> <a class="idref" href="Subst.html#subst_app"><span class="id" type="lemma">subst_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_hap_st_st"><span class="id" type="constructor">st_hap_st_st</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t1</span> := <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t3</span> <span class="id" type="var">t1</span>) (<span class="id" type="var">t2</span> := <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t3</span> <span class="id" type="var">t2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="Subst.html#subst_app"><span class="id" type="lemma">subst_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap__hap_subst"><span class="id" type="lemma">hap__hap_subst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>. <span class="id" type="tactic">apply</span> (<span class="id" type="var">IHHMN1</span> <span class="id" type="var">n</span>). <span class="id" type="tactic">apply</span> (<span class="id" type="var">IHHMN2</span> <span class="id" type="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;hap&nbsp;with&nbsp;Lam&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#st_haplam_st"><span class="id" type="constructor">st_haplam_st</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">t1</span> := <a class="idref" href="Subst.html#subst"><span class="id" type="definition">subst</span></a> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1) <span class="id" type="var">t3</span> <span class="id" type="var">t1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="Subst.html#subst_lam"><span class="id" type="lemma">subst_lam</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> <a class="idref" href="Kashima.html#hap__hap_subst"><span class="id" type="lemma">hap__hap_subst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="tactic">apply</span> (<span class="id" type="var">IHHMN</span> (<span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.4pl2/stdlib/Coq.Init.Peano.html#:nat_scope:x_'+'_x"><span class="id" type="notation">+</span></a>1)).<br/>
<span class="id" type="keyword">Qed</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>